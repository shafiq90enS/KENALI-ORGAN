<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lembaran Kerja Sains: Organ Manusia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .worksheet {
            background-image: url('https://www.transparenttextures.com/patterns/lined-paper.png');
            background-color: #fffff0;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-radius: 15px;
            border: 1px solid #ddd;
        }
        .dragging {
            opacity: 0.5;
            transform: scale(1.1);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .drag-over {
            background-color: #cceeff;
            border-style: solid;
        }
        .correct {
            background-color: #e6fffa;
            border-color: #38a169;
            border-style: solid;
        }
        .incorrect {
            background-color: #fff5f5;
            border-color: #e53e3e;
            border-style: solid;
        }
        .drop-zone, .organ-item {
            transition: all 0.3s ease;
        }
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
          -webkit-appearance: none; 
          margin: 0; 
        }
        input[type=number] {
          -moz-appearance: textfield;
        }
        
        /* Gaya Sijil */
        #certificate-modal {
            transition: opacity 0.3s ease-in-out;
        }
        .certificate-content {
            font-family: 'Playfair Display', serif;
            background: #ffffff;
            border: 10px solid #a0aec0;
            padding: 2rem;
            box-shadow: 0 0 0 5px #4a5568;
        }

        /* Gaya Cetakan */
        @media print {
            body * {
                visibility: hidden;
            }
            #certificate-modal, #certificate-modal * {
                visibility: visible;
            }
            #certificate-modal {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: white;
            }
            .certificate-content {
                width: 100%;
                height: 100%;
                border: 10px solid #a0aec0;
                box-shadow: none;
            }
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-blue-100 flex items-center justify-center min-h-screen p-4">

    <!-- Kontena Utama Lembaran Kerja -->
    <div class="worksheet w-full max-w-5xl p-6 md:p-10">
        
        <!-- Bahagian Header: Nama dan Kelas -->
        <header class="mb-8">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0">
                <div class="flex items-center w-full md:w-1/2">
                    <label for="nama" class="text-lg font-semibold text-gray-700 mr-3">Nama:</label>
                    <input type="text" id="nama" class="flex-grow p-2 border-b-2 border-gray-300 focus:border-blue-500 outline-none bg-transparent" placeholder="Sila isi nama anda">
                </div>
                <div class="flex items-center w-full md:w-1/3">
                    <label for="kelas" class="text-lg font-semibold text-gray-700 mr-3">Kelas:</label>
                    <input type="text" id="kelas" class="flex-grow p-2 border-b-2 border-gray-300 focus:border-blue-500 outline-none bg-transparent">
                </div>
            </div>
            <hr class="mt-4 border-gray-300">
        </header>

        <!-- Tajuk dan Arahan -->
        <div class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-800">Kenali Organ Manusia</h1>
            <p class="text-gray-600 mt-2 text-md">Arahan: Seret nama organ dan lepaskan pada fungsinya yang betul.</p>
        </div>

        <!-- Bahagian Interaktif: Soalan dan Organ -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">

            <!-- Kolum Kiri: Fungsi (Zon Jatuhan) -->
            <div id="questions-container" class="space-y-4">
                <div class="question-item bg-white p-4 rounded-lg shadow-sm border border-gray-200"><p class="text-gray-700 mb-2">1. Mengepam darah ke seluruh badan.</p><div class="drop-zone border-2 border-dashed border-gray-400 rounded-lg min-h-[60px] p-2 flex items-center justify-center" data-answer="jantung"></div></div>
                <div class="question-item bg-white p-4 rounded-lg shadow-sm border border-gray-200"><p class="text-gray-700 mb-2">2. Pusat kawalan badan yang mengawal fikiran dan pergerakan.</p><div class="drop-zone border-2 border-dashed border-gray-400 rounded-lg min-h-[60px] p-2 flex items-center justify-center" data-answer="otak"></div></div>
                <div class="question-item bg-white p-4 rounded-lg shadow-sm border border-gray-200"><p class="text-gray-700 mb-2">3. Membantu kita menyedut oksigen dan melepaskan karbon dioksida.</p><div class="drop-zone border-2 border-dashed border-gray-400 rounded-lg min-h-[60px] p-2 flex items-center justify-center" data-answer="peparu"></div></div>
                <div class="question-item bg-white p-4 rounded-lg shadow-sm border border-gray-200"><p class="text-gray-700 mb-2">4. Menapis bahan buangan daripada darah untuk menghasilkan air kencing.</p><div class="drop-zone border-2 border-dashed border-gray-400 rounded-lg min-h-[60px] p-2 flex items-center justify-center" data-answer="ginjal"></div></div>
                <div class="question-item bg-white p-4 rounded-lg shadow-sm border border-gray-200"><p class="text-gray-700 mb-2">5. Mencerna dan menguraikan makanan yang kita makan.</p><div class="drop-zone border-2 border-dashed border-gray-400 rounded-lg min-h-[60px] p-2 flex items-center justify-center" data-answer="perut"></div></div>
                <div class="question-item bg-white p-4 rounded-lg shadow-sm border border-gray-200"><p class="text-gray-700 mb-2">6. Membersihkan darah dan membantu dalam proses penghadaman.</p><div class="drop-zone border-2 border-dashed border-gray-400 rounded-lg min-h-[60px] p-2 flex items-center justify-center" data-answer="hati"></div></div>
            </div>

            <!-- Kolum Kanan: Organ (Item Seret) -->
            <div id="organ-bank" class="bg-blue-50 p-4 rounded-lg border-2 border-blue-200">
                <h3 class="text-xl font-semibold text-center text-gray-700 mb-4">Pilihan Organ</h3>
                <div id="organ-list" class="grid grid-cols-2 gap-4">
                    <div id="organ-otak" class="organ-item bg-purple-200 text-purple-800 p-4 rounded-lg text-center font-semibold cursor-move shadow" draggable="true">Otak</div>
                    <div id="organ-peparu" class="organ-item bg-sky-200 text-sky-800 p-4 rounded-lg text-center font-semibold cursor-move shadow" draggable="true">Peparu</div>
                    <div id="organ-jantung" class="organ-item bg-red-200 text-red-800 p-4 rounded-lg text-center font-semibold cursor-move shadow" draggable="true">Jantung</div>
                    <div id="organ-perut" class="organ-item bg-orange-200 text-orange-800 p-4 rounded-lg text-center font-semibold cursor-move shadow" draggable="true">Perut</div>
                    <div id="organ-hati" class="organ-item bg-yellow-200 text-yellow-800 p-4 rounded-lg text-center font-semibold cursor-move shadow" draggable="true">Hati</div>
                    <div id="organ-ginjal" class="organ-item bg-green-200 text-green-800 p-4 rounded-lg text-center font-semibold cursor-move shadow" draggable="true">Ginjal</div>
                </div>
            </div>
        </div>

        <!-- Bahagian Penghantaran dan Markah -->
        <footer class="mt-10 text-center">
            <button id="submit-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-transform duration-300">
                Hantar Jawapan
            </button>
            <div id="score-container" class="mt-6 hidden">
                <p class="text-2xl font-bold text-gray-800">Markah Anda:</p>
                <p id="score-display" class="text-5xl font-bold text-green-600"></p>
                <p id="final-message" class="text-lg mt-2 text-gray-700"></p>
            </div>
        </footer>
    </div>

    <!-- Modal Sijil (tersembunyi secara lalai) -->
    <div id="certificate-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="certificate-content w-full max-w-4xl text-center relative rounded-lg">
            <img src="https://i.postimg.cc/7Y0cLjwp/376888287-775088887750306-7998625394497654617-n.jpg" alt="Logo Sekolah" class="mx-auto mb-4 h-24" onerror="this.style.display='none'">
            <h2 id="cert-title" class="text-5xl text-gray-800 mb-4">Sijil Pencapaian</h2>
            <p class="text-xl text-gray-600 font-sans mb-2">Dengan ini dianugerahkan kepada</p>
            <p id="cert-student-name" class="text-4xl text-blue-800 font-bold mb-4">NAMA MURID</p>
            <p id="cert-reason" class="text-xl text-gray-600 font-sans mb-6">
                kerana berjaya menjawab semua soalan dengan betul dalam kuiz <br><strong>Kenali Organ Manusia</strong>.
            </p>
            <div class="flex justify-around items-center mt-8 font-sans">
                <div>
                    <p id="cert-date" class="text-lg text-gray-700 border-t-2 border-gray-500 pt-2 px-4">Tarikh</p>
                </div>
                <div>
                    <p class="text-lg text-gray-700 border-t-2 border-gray-500 pt-2 px-4">Tandatangan Guru</p>
                </div>
            </div>
            <div class="mt-10 space-x-4 no-print">
                <button id="print-cert-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition-transform transform hover:scale-105">Cetak Sijil</button>
                <button id="close-cert-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-lg transition-transform transform hover:scale-105">Tutup</button>
            </div>
        </div>
    </div>


    <script>
        // --- PEMBOLEHUBAH ---
        const draggableItems = document.querySelectorAll('.organ-item');
        const dropZones = document.querySelectorAll('.drop-zone');
        const submitBtn = document.getElementById('submit-btn');
        const scoreContainer = document.getElementById('score-container');
        const scoreDisplay = document.getElementById('score-display');
        const finalMessage = document.getElementById('final-message');
        const organBank = document.getElementById('organ-list');
        const studentNameInput = document.getElementById('nama');

        // --- PEMBOLEHUBAH SIJIL ---
        const certificateModal = document.getElementById('certificate-modal');
        const certStudentName = document.getElementById('cert-student-name');
        const certDate = document.getElementById('cert-date');
        const printCertBtn = document.getElementById('print-cert-btn');
        const closeCertBtn = document.getElementById('close-cert-btn');
        const certTitle = document.getElementById('cert-title');
        const certReason = document.getElementById('cert-reason');

        // --- FUNGSI SERET DAN LEPAS (DRAG AND DROP) ---
        draggableItems.forEach(item => {
            item.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', e.target.id);
                setTimeout(() => item.classList.add('dragging'), 0);
            });
            item.addEventListener('dragend', () => {
                item.classList.remove('dragging');
            });
        });

        dropZones.forEach(zone => {
            zone.addEventListener('dragover', (e) => {
                e.preventDefault();
                zone.classList.add('drag-over');
            });
            zone.addEventListener('dragleave', () => {
                zone.classList.remove('drag-over');
            });
            zone.addEventListener('drop', (e) => {
                e.preventDefault();
                zone.classList.remove('drag-over');
                const draggedId = e.dataTransfer.getData('text/plain');
                const draggedElement = document.getElementById(draggedId);
                if (zone.children.length > 0) {
                    const existingChild = zone.children[0];
                    organBank.appendChild(existingChild);
                }
                if (draggedElement) {
                    zone.appendChild(draggedElement);
                }
            });
        });

        // --- FUNGSI SEMAK JAWAPAN ---
        submitBtn.addEventListener('click', () => {
            let score = 0;
            const totalQuestions = dropZones.length;

            dropZones.forEach(zone => {
                zone.classList.remove('correct', 'incorrect');
                const correctAnswer = zone.dataset.answer;
                const droppedItem = zone.querySelector('.organ-item');
                if (droppedItem) {
                    const droppedAnswer = droppedItem.id.split('-')[1];
                    if (droppedAnswer === correctAnswer) {
                        score++;
                        zone.classList.add('correct');
                    } else {
                        zone.classList.add('incorrect');
                    }
                } else {
                    zone.classList.add('incorrect');
                }
            });

            // --- PAPAR MARKAH DAN MAKLUM BALAS ---
            scoreDisplay.textContent = `${score} / ${totalQuestions}`;
            
            if (score === totalQuestions) {
                finalMessage.textContent = 'Tahniah! Semua jawapan betul. Anda hebat! Sijil Pencapaian telah dijana.';
                finalMessage.style.color = '#38a169';
                showCertificate(true); // Panggil sijil PENCAPAIAN
            } else if (score >= totalQuestions / 2) {
                finalMessage.textContent = 'Bagus! Anda sudah faham sebahagian besar. Sijil Penyertaan telah dijana.';
                finalMessage.style.color = '#dd6b20';
                showCertificate(false); // Panggil sijil PENYERTAAN
            } else {
                finalMessage.textContent = 'Jangan putus asa! Terima kasih kerana mencuba. Sijil Penyertaan telah dijana.';
                finalMessage.style.color = '#e53e3e';
                showCertificate(false); // Panggil sijil PENYERTAAN
            }
            scoreContainer.classList.remove('hidden');
            scoreContainer.scrollIntoView({ behavior: 'smooth' });
        });

        // --- FUNGSI SIJIL ---
        function showCertificate(isAchievement) {
            const studentName = studentNameInput.value.trim();
            certStudentName.textContent = studentName === '' ? 'Murid Cemerlang' : studentName;
            
            const today = new Date();
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            certDate.textContent = today.toLocaleDateString('ms-MY', options);

            // Kemas kini kandungan sijil berdasarkan prestasi
            if (isAchievement) {
                certTitle.textContent = 'Sijil Pencapaian';
                certReason.innerHTML = 'kerana berjaya menjawab semua soalan dengan betul dalam kuiz <br><strong>Kenali Organ Manusia</strong>.';
            } else {
                certTitle.textContent = 'Sijil Penyertaan';
                certReason.innerHTML = 'sebagai penghargaan kerana telah mengambil bahagian dalam kuiz <br><strong>Kenali Organ Manusia</strong>.';
            }

            certificateModal.classList.remove('hidden');
        }

        closeCertBtn.addEventListener('click', () => {
            certificateModal.classList.add('hidden');
        });

        printCertBtn.addEventListener('click', () => {
            window.print();
        });

    </script>

</body>
</html>